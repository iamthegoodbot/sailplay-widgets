(function (angular, sp, jQuery) {

  angular.module('iledebeaute.directives.authorization', [])

    .directive('authCmp', [function () {
      return {
        restrict: 'E',
        replace: true,
        template: '<div class="overlay" data-ng-switch="state">\n    \n    <div class="overlay_iner overlay_enter" data-ng-switch-when="1">\n        <a href="#" class="close"></a>\n        <h2>Вход в программу лояльности</h2>\n        <h3>Для того чтобы подтвердить участие в элитном клубе Острова\n            Красоты необходимо заполнить форму, указав данные о себе.</h3>\n        <form action="#">\n            <div class="input_block">\n                <label for="id_card">Номер карты:</label>\n                <input type="text" id="id_card" placeholder="0000 0000 0000 0000">\n            </div>\n            <div class="input_block">\n                <input type="submit" value="Далее" data-ng-click="setState(2, $event)">\n            </div>\n        </form>\n    </div>\n\n    <div class="overlay_iner overlay_enter" data-ng-switch-when="2">\n        <a href="#" class="close"></a>\n        <h2 class="mb">Вход в программу лояльности</h2>\n        <form action="#">\n            <div class="input_block">\n                <label for="pas">Пароль</label>\n                <input type="text" id="pas" >\n            </div>\n            <div class="input_block">\n                <input type="submit" value="Войти" data-ng-click="successAuth($event)">\n                <input type="submit" value="Восстановить пароль" data-ng-click="setState(3, $event)">\n            </div>\n        </form>\n    </div>\n\n    <div class="overlay_iner overlay_enter" data-ng-switch-when="3">\n        <a href="#" class="close"></a>\n        <h2 class="mb">Вход в программу лояльности</h2>\n        <form action="#">\n            <div class="input_block">\n                <label for="kod">Код подтверждения</label>\n                <input type="text" id="kod" >\n            </div>\n            <div class="input_block">\n                <label for="new_pas">Новый пароль</label>\n                <input type="text" id="new_pas" >\n            </div>\n            <div class="input_block">\n                <input type="submit" value="Войти">\n            </div>\n        </form>\n    </div>\n\n    <div class="overlay_iner overlay_enter_reg"  data-ng-switch-when="4">\n        <a href="#" class="close"></a>\n        <h2>Вход в программу лояльности</h2>\n        <h3 class="req_info">Все поля обязательны</h3>\n        <form action="#">\n            <div class="input_block">\n                <label for="s_name">Фамилия</label>\n                <input type="text" id="s_name" placeholder="Введите вашу фамилию">\n            </div>\n            <div class="input_block">\n                <label for="name">Имя</label>\n                <input type="text" id="name" placeholder="Введите ваше имя">\n            </div>\n            <div class="input_block">\n                <label for="l_name">Отчество</label>\n                <input type="text" id="l_name" placeholder="Введите ваше отчество">\n            </div>\n            <div class="input_block">\n                <label for="date">Дата рождения</label>\n                <div class="input_date">\n                    <div class="select_block select_day">\n                        <select>\n                            <option value="0">День</option>\n                            <option value="1">1</option>\n                            <option value="2">2</option>\n                            <option value="3">3</option>\n                        </select>\n                    </div>\n                    <div class="select_block select_month">\n                        <select>\n                            <option value="0">Месяц</option>\n                            <option value="1">Январь</option>\n                            <option value="2">Февраль</option>\n                            <option value="3">Март</option>\n                            <option value="4">Апрель</option>\n                            <option value="5">Май</option>\n                            <option value="6">Июнь</option>\n                            <option value="7">Июль</option>\n                            <option value="8">Август</option>\n                            <option value="9">Сентябрь</option>\n                            <option value="10">Октябрь</option>\n                            <option value="11">Ноябрь</option>\n                            <option value="12">Декабрь</option>\n                        </select>\n                    </div>\n                    <div class="select_block select_year">\n                        <select>\n                            <option value="0">Год</option>\n                            <option value="1989">1989</option>\n                            <option value="1990">1990</option>\n                            <option value="1991">1991</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n            <div class="input_block">\n                <label for="l_name">Пол</label>\n                <div class="input_gender">\n                    <div class="check">\n                        <input type="radio" id="man" name="gender" value="0"/>\n                        <label for="man">Мужской</label>\n                    </div>\n                    <div class="check">\n                        <input type="radio" id="woman" name="gender" value="1"/>\n                        <label for="woman">Женский</label>\n                    </div>\n                </div>\n            </div>\n            <div class="input_block">\n                <label for="email">Email</label>\n                <input type="text" id="email" placeholder="Введите ваш Email">\n            </div>\n            <div class="input_block">\n                <label for="phone">Телефон</label>\n                <input type="text" class="inp_ch" id="phone" placeholder="+7 (968) 000 - 00 - 00">\n            </div>\n            <div class="input_block">\n                <label>Ваш магазин</label>\n                <div class="select_block select_shop">\n                    <select>\n                        <option value="0">Выберите любимый магазин</option>\n                        <option value="1">магазин 1</option>\n                        <option value="2">магазин 2</option>\n                        <option value="3">магазин 3</option>\n                    </select>\n                </div>\n            </div>\n\t\t\t\t<span class="form_info">\n\t\t\t\t\tЕсли у вас возникли проблемы с заполнением формы, пожалуйста,\nобратитесь в нашу службу поддержки по телефону - 8 800 111 22 33.\n\t\t\t\t</span>\n            <div class="form_subscribe">\n                <div class="check">\n                    <input type="checkbox" id="subscribe" name="subscribe" value="1"/>\n                    <label for="subscribe">Подписаться на рассылку</label>\n                </div>\n                <div class="check">\n                    <input type="checkbox" id="agree" name="agree" value="1"/>\n                    <label for="agree">Согласие с правилами программы</label>\n                </div>\n            </div>\n            <div class="input_block input_block_entr">\n                <input type="submit" value="Далее">\n            </div>\n        </form>\n    </div>\n    \n</div>',
        scope: {
          model: '='
        },
        link: function (scope) {

          scope.state = 1;

          scope.setState = function (state, e) {
            e && event.preventDefault();
            scope.state = state;
          };

          scope.successAuth = function (e) {
            e && event.preventDefault();
            scope.model = true;
          };

        }
      }

    }]);

  document.createElement('auth-cmp');
  var elems = document.querySelectorAll('auth-сmp');
  for (var i = 0; i < elems.length; i += 1) {
    angular.bootstrap(elems[i], ['iledebeaute.directives.authorization']);
  }

}(window.angular, window.SAILPLAY, window.$));